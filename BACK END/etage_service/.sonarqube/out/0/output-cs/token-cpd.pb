Ê
M/Users/MEHDI/Desktop/wert/BACK END/etage_service/Data/ApplicationDbContext.cs
	namespace 	
etage_service
 
. 
Data 
{ 
public 

class  
ApplicationDbContext %
:& '
	DbContext( 1
{ 
public		  
ApplicationDbContext		 #
(		# $
DbContextOptions		$ 4
<		4 5 
ApplicationDbContext		5 I
>		I J
options		K R
)		R S
:		T U
base		V Z
(		Z [
options		[ b
)		b c
{		d e
}		f g
public 
DbSet 
< 
Floor 
> 
Floors "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} Ö
S/Users/MEHDI/Desktop/wert/BACK END/etage_service/Migrations/20231230133319_first.cs
	namespace 	
etage_service
 
. 

Migrations "
{ 
public		 

partial		 
class		 
first		 
:		  
	Migration		! *
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
Guid& *
>* +
(+ ,
type, 0
:0 1
$str2 8
,8 9
nullable: B
:B C
falseD I
)I J
,J K
FloorNumber 
=  !
table" '
.' (
Column( .
<. /
int/ 2
>2 3
(3 4
type4 8
:8 9
$str: C
,C D
nullableE M
:M N
falseO T
)T U
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 0
,0 1
x2 3
=>4 6
x7 8
.8 9
Id9 ;
); <
;< =
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str 
) 
;  
}   	
}!! 
}"" æ
@/Users/MEHDI/Desktop/wert/BACK END/etage_service/Models/Floor.cs
	namespace 	
etage_service
 
. 
Models 
{ 
public 

class 
Floor 
{ 
[ 	
Key	 
] 
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
public		 
int		 
FloorNumber		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
}

 
} ž'
F/Users/MEHDI/Desktop/wert/BACK END/etage_service/Module/FloorModule.cs
	namespace 	
etage_service
 
. 
Module 
{ 
public 

static 
class 
FloorModule #
{ 
public		 
static		 !
IEndpointRouteBuilder		 +
AddFloorModule		, :
(		: ;
this		; ?!
IEndpointRouteBuilder		@ U
builder		V ]
)		] ^
{

 	
builder 
. 
MapGet 
( 
$str (
,( )
(* + 
ApplicationDbContext+ ?
	dbContext@ I
)I J
=>K M
{ 
return 
Results 
. 
Ok !
(! "
	dbContext" +
.+ ,
Floors, 2
)2 3
;3 4
} 
) 
; 
builder 
. 
MapPost 
( 
$str 0
,0 1
(2 3
[3 4
FromBody4 <
]< =
Floor> C
floorD I
,I J 
ApplicationDbContextK _
	dbContext` i
)i j
=>k m
{ 
	dbContext 
. 
Floors  
.  !
Add! $
($ %
floor% *
)* +
;+ ,
	dbContext 
. 
SaveChanges %
(% &
)& '
;' (
return 
Results 
. 
Ok !
(! "
floor" '
)' (
;( )
} 
) 
; 
builder 
. 
MapGet 
( 
$str ,
,, -
(. /
Guid/ 3
id4 6
,6 7 
ApplicationDbContext8 L
	dbContextM V
)V W
=>X Z
{ 
Floor   
?   
floor   
=   
	dbContext   (
.  ( )
Floors  ) /
.  / 0
Find  0 4
(  4 5
id  5 7
)  7 8
;  8 9
if"" 
("" 
floor"" 
is"" 
null"" !
)""! "
return## 
Results## "
.##" #
NotFound### +
(##+ ,
$str##, =
)##= >
;##> ?
return%% 
Results%% 
.%% 
Ok%% !
(%%! "
floor%%" '
)%%' (
;%%( )
}&& 
)&& 
;&& 
builder(( 
.(( 
MapPut(( 
((( 
$str(( .
,((. /
(((0 1
Floor((1 6
floor((7 <
,((< = 
ApplicationDbContext((> R
	dbContext((S \
)((\ ]
=>((^ `
{)) 
Floor** 
?** 
floorToUpdate** $
=**% &
	dbContext**' 0
.**0 1
Floors**1 7
.**7 8
Find**8 <
(**< =
floor**= B
.**B C
Id**C E
)**E F
;**F G
if++ 
(++ 
floorToUpdate++ !
is++" $
null++% )
)++) *
return,, 
Results,, "
.,," #
NotFound,,# +
(,,+ ,
$str,,, =
),,= >
;,,> ?
floorToUpdate-- 
.-- 
FloorNumber-- )
=--* +
floor--, 1
.--1 2
FloorNumber--2 =
;--= >
return.. 
Results.. 
... 
Ok.. !
(..! "
floorToUpdate.." /
)../ 0
;..0 1
}// 
)// 
;// 
builder22 
.22 
	MapDelete22 
(22 
$str22 /
,22/ 0
(221 2
Guid222 6
id227 9
,229 : 
ApplicationDbContext22; O
	dbContext22P Y
)22Y Z
=>22[ ]
{33 
Floor44 
?44 
floor44 
=44 
	dbContext44 (
.44( )
Floors44) /
.44/ 0
Find440 4
(444 5
id445 7
)447 8
;448 9
if55 
(55 
floor55 
is55 
null55 !
)55! "
return66 
Results66 "
.66" #
NotFound66# +
(66+ ,
$str66, =
)66= >
;66> ?
	dbContext88 
.88 
Floors88  
.88  !
Remove88! '
(88' (
floor88( -
)88- .
;88. /
	dbContext99 
.99 
SaveChanges99 %
(99% &
)99& '
;99' (
return:: 
Results:: 
.:: 
Ok:: !
(::! "
$str::" +
)::+ ,
;::, -
};; 
);; 
;;; 
return>> 
builder>> 
;>> 
}?? 	
}@@ 
}AA õ
;/Users/MEHDI/Desktop/wert/BACK END/etage_service/Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder

 
.

 
Services

 
.

 #
AddEndpointsApiExplorer

 (
(

( )
)

) *
;

* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddCors 
( 
policy 
=>  "
{ 
policy 

.
 
AddDefaultPolicy 
( 
options #
=>$ &
{ 
options 
. 
WithOrigins 
( 
$str 3
)3 4
. 	
AllowAnyHeader	 
( 
) 
. 	
AllowAnyMethod	 
( 
) 
. 	
AllowCredentials	 
( 
) 
; 
} 
) 
; 
} 
) 
; 
builder 
. 
Services 
. 
AddDbContext 
<  
ApplicationDbContext 2
>2 3
(3 4
options4 ;
=>< >
{ 
options 
. 
	UseSqlite 
( 
builder 
. 
Configuration +
.+ ,
GetConnectionString, ?
(? @
$str@ S
)S T
)T U
;U V
} 
) 
; 
builder 
. 
Services 
. 
AddDiscoveryClient #
(# $
builder$ +
.+ ,
Configuration, 9
)9 :
;: ;
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
app   
.   
UseDiscoveryClient   
(   
)   
;   
app## 
.## 
UseCors## 
(## 
)## 
;## 
if&& 
(&& 
app&& 
.&& 
Environment&& 
.&& 
IsDevelopment&& !
(&&! "
)&&" #
)&&# $
{'' 
app(( 
.(( 

UseSwagger(( 
((( 
)(( 
;(( 
app)) 
.)) 
UseSwaggerUI)) 
()) 
))) 
;)) 
}** 
app,, 
.,, 
UseHttpsRedirection,, 
(,, 
),, 
;,, 
app.. 
... 
AddFloorModule.. 
(.. 
).. 
;.. 
app00 
.00 
Run00 
(00 
)00 	
;00	 
