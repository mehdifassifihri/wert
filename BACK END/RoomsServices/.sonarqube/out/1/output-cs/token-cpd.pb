À
M/Users/MEHDI/Desktop/wert/BACK END/RoomsServices/Data/ApplicationDbContext.cs
	namespace 	
rooms
 
. 
Data 
{ 
public 

class  
ApplicationDbContext %
:& '
	DbContext( 1
{ 
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
<4 5 
ApplicationDbContext5 I
>I J
optionsK R
)R S
:T U
baseV Z
(Z [
options[ b
)b c
{d e
}f g
public

 
DbSet

 
<

 
Room

 
>

 
Rooms

  
{

! "
get

# &
;

& '
set

( +
;

+ ,
}

- .
} 
} Æ
?/Users/MEHDI/Desktop/wert/BACK END/RoomsServices/Dto/RoomDto.cs
	namespace 	
RoomsServices
 
. 
Dto 
{ 
public 

class 
RoomDto 
{ 
public		 
Guid		 
Id		 
{		 
get		 
;		 
set		 !
;		! "
}		# $
public

 
string

 
Name

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
=

) *
string

+ 1
.

1 2
Empty

2 7
;

7 8
public 
int 
	MaxNumber 
{ 
get "
;" #
set$ '
;' (
}) *
public 
Floor 
? 
Floor 
{ 
get !
;! "
set# &
;& '
}( )
} 
} 
@/Users/MEHDI/Desktop/wert/BACK END/RoomsServices/Entity/Floor.cs
	namespace 	
RoomsServices
 
. 
Entity 
{ 
public 

class 
Floor 
{		 
[

 	
JsonPropertyName

	 
(

 
$str

 
)

 
]

  
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
[ 	
JsonPropertyName	 
( 
$str '
)' (
]( )
public 
int 
FloorNumber 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ß
?/Users/MEHDI/Desktop/wert/BACK END/RoomsServices/Entity/Room.cs
	namespace 	
rooms
 
. 
Entity 
{ 
public 

class 
Room 
{ 
[ 	
Key	 
] 
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
public		 
string		 
Name		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
=		) *
string		+ 1
.		1 2
Empty		2 7
;		7 8
public

 
int

 
	MaxNumber

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
Guid 
FloorId 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ü
S/Users/MEHDI/Desktop/wert/BACK END/RoomsServices/Migrations/20231225164238_first.cs
	namespace 	
rooms
 
. 

Migrations 
{ 
public		 

partial		 
class		 
first		 
:		  
	Migration		! *
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
Guid& *
>* +
(+ ,
type, 0
:0 1
$str2 8
,8 9
nullable: B
:B C
falseD I
)I J
,J K
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 <
,< =
nullable> F
:F G
falseH M
)M N
,N O
	MaxNumber 
= 
table  %
.% &
Column& ,
<, -
int- 0
>0 1
(1 2
type2 6
:6 7
$str8 A
,A B
nullableC K
:K L
falseM R
)R S
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% /
,/ 0
x1 2
=>3 5
x6 7
.7 8
Id8 :
): ;
;; <
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name   
:   
$str   
)   
;   
}!! 	
}"" 
}## ø
U/Users/MEHDI/Desktop/wert/BACK END/RoomsServices/Migrations/20231230142315_floorid.cs
	namespace 	
rooms
 
. 

Migrations 
{ 
public		 

partial		 
class		 
floorid		  
:		! "
	Migration		# ,
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
Guid' +
>+ ,
(, -
name 
: 
$str 
,  
table 
: 
$str 
, 
type 
: 
$str 
, 
nullable 
: 
false 
,  
defaultValue 
: 
new !
Guid" &
(& '
$str' M
)M N
)N O
;O P
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str 
,  
table 
: 
$str 
) 
;  
} 	
} 
} ÷V
G/Users/MEHDI/Desktop/wert/BACK END/RoomsServices/Modules/RoomsModule.cs
	namespace		 	
rooms		
 
.		 
Modules		 
{

 
public 

static 
class 
RoomsModule #
{ 
public 
static !
IEndpointRouteBuilder +
AddRoomModule, 9
(9 :
this: >!
IEndpointRouteBuilder? T
routeBuilderU a
)a b
{ 	
routeBuilder 
. 
MapGet 
(  
$str  ,
,, -
async. 3
(4 5 
ApplicationDbContext5 I
	dbContextJ S
)S T
=>U W
{ 
List 
< 
Room 
> 
rooms  
=! "
	dbContext# ,
., -
Rooms- 2
.2 3
ToList3 9
(9 :
): ;
;; <
List 
< 
RoomDto 
> 
roomDtos &
=' (
new) ,
(, -
)- .
;. /
var 

httpClient 
=  
new! $

HttpClient% /
(/ 0
)0 1
;1 2

httpClient 
. 
BaseAddress &
=' (
new) ,
Uri- 0
(0 1
$str1 H
)H I
;I J
foreach 
( 
var 
room !
in" $
rooms% *
)* +
{ 
var 
res 
= 
await #

httpClient$ .
.. /
GetAsync/ 7
(7 8
$str8 E
+F G
roomH L
.L M
FloorIdM T
)T U
;U V
if 
( 
res 
. 
IsSuccessStatusCode /
)/ 0
{ 
string   
content   &
=  ' (
await  ) .
res  / 2
.  2 3
Content  3 :
.  : ;
ReadAsStringAsync  ; L
(  L M
)  M N
;  N O
Floor!! 
floor!! #
=!!$ %
JsonSerializer!!& 4
.!!4 5
Deserialize!!5 @
<!!@ A
Floor!!A F
>!!F G
(!!G H
content!!H O
)!!O P
!!!P Q
;!!Q R
Console"" 
.""  
	WriteLine""  )
("") *
floor""* /
.""/ 0
FloorNumber""0 ;
)""; <
;""< =
roomDtos##  
.##  !
Add##! $
(##$ %
new##% (
RoomDto##) 0
(##0 1
)##1 2
{$$ 
Id%% 
=%%  
room%%! %
.%%% &
Id%%& (
,%%( )
Name&&  
=&&! "
room&&# '
.&&' (
Name&&( ,
,&&, -
	MaxNumber'' %
=''& '
room''( ,
.'', -
	MaxNumber''- 6
,''6 7
Floor(( !
=((" #
new(($ '
(((' (
)((( )
{)) 
Id**  "
=**# $
floor**% *
.*** +
Id**+ -
,**- .
FloorNumber++  +
=++, -
floor++. 3
.++3 4
FloorNumber++4 ?
},, 
}-- 
)-- 
;-- 
}.. 
else// 
{00 
roomDtos11  
.11  !
Add11! $
(11$ %
new11% (
RoomDto11) 0
(110 1
)111 2
{22 
Id33 
=33  
room33! %
.33% &
Id33& (
,33( )
Name44  
=44! "
room44# '
.44' (
Name44( ,
,44, -
	MaxNumber55 %
=55& '
room55( ,
.55, -
	MaxNumber55- 6
,556 7
Floor66 !
=66" #
null66$ (
}77 
)77 
;77 
}88 
}<< 
return?? 
Results?? 
.?? 
Ok?? !
(??! "
roomDtos??" *
)??* +
;??+ ,
}@@ 
)@@ 
;@@ 
routeBuilderBB 
.BB 
MapPostBB  
(BB  !
$strBB! 4
,BB4 5
(BB6 7 
ApplicationDbContextBB7 K
	dbContextBBL U
,BBU V
[BBW X
FromBodyBBX `
]BB` a
RoomBBb f
roomBBg k
)BBk l
=>BBm o
{CC 
	dbContextEE 
.EE 
RoomsEE 
.EE  
AddEE  #
(EE# $
roomEE$ (
)EE( )
;EE) *
	dbContextFF 
.FF 
SaveChangesFF %
(FF% &
)FF& '
;FF' (
returnGG 
ResultsGG 
.GG 
CreatedGG &
(GG& '
roomGG' +
.GG+ ,
IdGG, .
.GG. /
ToStringGG/ 7
(GG7 8
)GG8 9
,GG9 :
roomGG; ?
)GG? @
;GG@ A
}II 
)II 
;II 
routeBuilderLL 
.LL 
MapPutLL 
(LL  
$strLL  3
,LL3 4
(LL5 6
RoomLL6 :
roomLL; ?
,LL? @ 
ApplicationDbContextLLA U
	dbContextLLV _
)LL_ `
=>LLa c
{MM 
RoomOO 
?OO 
roomToUpdateOO "
=OO# $
	dbContextOO% .
.OO. /
RoomsOO/ 4
.OO4 5
FindOO5 9
(OO9 :
roomOO: >
.OO> ?
IdOO? A
)OOA B
;OOB C
ifPP 
(PP 
roomPP 
isPP 
nullPP  
)PP  !
returnQQ 
ResultsQQ "
.QQ" #
NotFoundQQ# +
(QQ+ ,
$strQQ, C
)QQC D
;QQD E
roomToUpdateTT 
!TT 
.TT 
	MaxNumberTT '
=TT( )
roomTT* .
.TT. /
	MaxNumberTT/ 8
;TT8 9
roomToUpdateUU 
.UU 
NameUU !
=UU" #
roomUU$ (
.UU( )
NameUU) -
;UU- .
	dbContextVV 
.VV 
RoomsVV 
.VV  
UpdateVV  &
(VV& '
roomVV' +
)VV+ ,
;VV, -
	dbContextWW 
.WW 
SaveChangesWW %
(WW% &
)WW& '
;WW' (
returnYY 
ResultsYY 
.YY 
OkYY !
(YY! "
roomToUpdateYY" .
)YY. /
;YY/ 0
}ZZ 
)ZZ 
;ZZ 
routeBuilder^^ 
.^^ 
MapGet^^ 
(^^  
$str^^  6
,^^6 7
async^^8 =
(^^> ?
Guid^^? C
id^^D F
,^^F G 
ApplicationDbContext^^H \
	dbContext^^] f
)^^f g
=>^^h j
{__ 
Roomaa 
?aa 
roomaa 
=aa 
	dbContextaa &
.aa& '
Roomsaa' ,
.aa, -
Findaa- 1
(aa1 2
idaa2 4
)aa4 5
;aa5 6

HttpClientbb 

httpClientbb %
=bb& '
newbb( +
(bb+ ,
)bb, -
;bb- .

httpClientcc 
.cc 
BaseAddresscc &
=cc' (
newcc) ,
Uricc- 0
(cc0 1
$strcc1 H
)ccH I
;ccI J
ifff 
(ff 
roomff 
isff 
nullff  
)ff  !
returngg 
Resultsgg "
.gg" #
NotFoundgg# +
(gg+ ,
$strgg, C
)ggC D
;ggD E
varii 
resii 
=ii 
awaitii 

httpClientii  *
.ii* +
GetAsyncii+ 3
(ii3 4
$strii4 A
+iiB C
roomiiD H
.iiH I
FloorIdiiI P
)iiP Q
;iiQ R
ifkk 
(kk 
reskk 
.kk 
IsSuccessStatusCodekk +
)kk+ ,
{ll 
varmm 
contentmm 
=mm  !
awaitmm" '
resmm( +
.mm+ ,
Contentmm, 3
.mm3 4
ReadAsStringAsyncmm4 E
(mmE F
)mmF G
;mmG H
Floornn 
?nn 
floornn  
=nn! "
JsonSerializernn# 1
.nn1 2
Deserializenn2 =
<nn= >
Floornn> C
>nnC D
(nnD E
contentnnE L
)nnL M
;nnM N
ifpp 
(pp 
floorpp 
ispp  
notpp! $
nullpp% )
)pp) *
returnqq 
Resultsqq &
.qq& '
Okqq' )
(qq) *
newqq* -
RoomDtoqq. 5
(qq5 6
)qq6 7
{rr 
Idss 
=ss  
roomss! %
.ss% &
Idss& (
,ss( )
Namett  
=tt! "
roomtt# '
.tt' (
Namett( ,
,tt, -
	MaxNumberuu %
=uu& '
roomuu( ,
.uu, -
	MaxNumberuu- 6
,uu6 7
Floorvv !
=vv" #
newvv$ '
(vv' (
)vv( )
{ww 
Idxx  "
=xx# $
floorxx% *
.xx* +
Idxx+ -
,xx- .
FloorNumberyy  +
=yy, -
flooryy. 3
.yy3 4
FloorNumberyy4 ?
}zz 
}{{ 
){{ 
;{{ 
}|| 
return 
Results 
. 
Ok !
(! "
room" &
)& '
;' (
}
 
)
 
;
 
routeBuilder
„„ 
.
„„ 
	MapDelete
„„ "
(
„„" #
$str
„„# @
,
„„@ A
(
„„B C
Guid
„„C G
id
„„H J
,
„„J K"
ApplicationDbContext
„„L `
	dbContext
„„a j
)
„„j k
=>
„„l n
{
…… 
Room
†† 
?
†† 
room
†† 
=
†† 
	dbContext
†† &
.
††& '
Rooms
††' ,
.
††, -
Find
††- 1
(
††1 2
id
††2 4
)
††4 5
;
††5 6
if
‡‡ 
(
‡‡ 
room
‡‡ 
is
‡‡ 
null
‡‡  
)
‡‡  !
return
ˆˆ 
Results
ˆˆ "
.
ˆˆ" #
NotFound
ˆˆ# +
(
ˆˆ+ ,
$str
ˆˆ, C
)
ˆˆC D
;
ˆˆD E
	dbContext
ŠŠ 
.
ŠŠ 
Rooms
ŠŠ 
.
ŠŠ  
Remove
ŠŠ  &
(
ŠŠ& '
room
ŠŠ' +
)
ŠŠ+ ,
;
ŠŠ, -
	dbContext
‹‹ 
.
‹‹ 
SaveChanges
‹‹ %
(
‹‹% &
)
‹‹& '
;
‹‹' (
return
 
Results
 
.
 
Ok
 !
(
! "
)
" #
;
# $
}
 
)
 
;
 
return
’’ 
routeBuilder
’’ 
;
’’  
}
““ 	
}
”” 
}•• 
;/Users/MEHDI/Desktop/wert/BACK END/RoomsServices/Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 #
AddEndpointsApiExplorer		 (
(		( )
)		) *
;		* +
builder

 
.

 
Services

 
.

 
AddSwaggerGen

 
(

 
)

  
;

  !
builder 
. 
Services 
. 
AddCors 
( 
policy 
=>  "
{ 
policy 

.
 
AddDefaultPolicy 
( 
options #
=>$ &
{ 
options 
. 
WithOrigins 
( 
$str 3
)3 4
. 	
AllowAnyHeader	 
( 
) 
. 	
AllowAnyMethod	 
( 
) 
. 	
AllowCredentials	 
( 
) 
; 
} 
) 
; 
} 
) 
; 
builder 
. 
Services 
. 
AddHttpClient 
( 
$str +
,+ ,
options- 4
=>5 7
{ 
options 
. 
BaseAddress 
= 
new 
Uri !
(! "
$str" =
)= >
;> ?
} 
) 
; 
builder 
. 
Services 
. 
AddDbContext 
<  
ApplicationDbContext 2
>2 3
(3 4
options4 ;
=>< >
{ 
options   
.   
	UseSqlite   
(   
builder   
.   
Configuration   +
.  + ,
GetConnectionString  , ?
(  ? @
$str  @ S
)  S T
)  T U
;  U V
}!! 
)!! 
;!! 
builder## 
.## 
Services## 
.## 
AddDiscoveryClient## #
(### $
builder##$ +
.##+ ,
Configuration##, 9
)##9 :
;##: ;
var'' 
app'' 
='' 	
builder''
 
.'' 
Build'' 
('' 
)'' 
;'' 
app)) 
.)) 
UseCors)) 
()) 
))) 
;)) 
app,, 
.,, 
UseDiscoveryClient,, 
(,, 
),, 
;,, 
if// 
(// 
app// 
.// 
Environment// 
.// 
IsDevelopment// !
(//! "
)//" #
)//# $
{00 
app11 
.11 

UseSwagger11 
(11 
)11 
;11 
app22 
.22 
UseSwaggerUI22 
(22 
)22 
;22 
}33 
app55 
.55 
UseHttpsRedirection55 
(55 
)55 
;55 
app88 
.88 
AddRoomModule88 
(88 
)88 
;88 
app:: 
.:: 
Run:: 
(:: 
):: 	
;::	 
